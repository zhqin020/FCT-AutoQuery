

# éœ€æ±‚ï¼šè”é‚¦æ³•é™¢ç§»æ°‘æ¡ˆä»¶æ•°æ®ç»Ÿè®¡åˆ†æ
**æ—¥æœŸ**ï¼š2025-11-26
**çŠ¶æ€**ï¼šå¾…å¼€å‘

## 1. èƒŒæ™¯ä¸ç›®æ ‡
### 1.1 èƒŒæ™¯
ç›®å‰æ‹¥æœ‰ä¸€æ‰¹åŠ æ‹¿å¤§è”é‚¦æ³•é™¢ï¼ˆFederal Courtï¼‰çš„ç§»æ°‘æ¡ˆä»¶è®°å½•ï¼ˆJSONæ ¼å¼ï¼‰ã€‚è¿™äº›æ•°æ®åŒ…å«æ¡ˆä»¶åŸºæœ¬ä¿¡æ¯åŠè¯¦ç»†çš„æ¡ˆå·è®°å½•ï¼ˆDocket Entriesï¼‰ã€‚ç›®å‰ä¾é äººå·¥é˜…è¯»åˆ†ææ•ˆç‡ä½ä¸‹ä¸”éš¾ä»¥å‘ç°å®è§‚è¶‹åŠ¿ã€‚

### 1.2 ç›®æ ‡
å¼€å‘è‡ªåŠ¨åŒ–åˆ†ææ¨¡å—ï¼Œç‹¬ç«‹äºç›®å‰çš„é‡‡é›†åŠŸèƒ½ï¼Œç»“åˆ **è§„åˆ™åŒ¹é…** ä¸ **æœ¬åœ° LLM (å¤§è¯­è¨€æ¨¡å‹)** æŠ€æœ¯ï¼Œå¯¹æ¡ˆä»¶è¿›è¡Œæ¸…æ´—ã€åˆ†ç±»å’Œç»Ÿè®¡ï¼Œæœ€ç»ˆç”Ÿæˆå¯è§†åŒ–çš„æŠ¥è¡¨ã€‚

### 1.3 æ ¸å¿ƒä»·å€¼
*   **è¶‹åŠ¿æ´å¯Ÿ**ï¼šäº†è§£æ¯æœˆæ¡ˆä»¶é‡åŠç§¯å‹æƒ…å†µã€‚
*   **æ•ˆç‡è¯„ä¼°**ï¼šè®¡ç®—æ¡ˆä»¶å¤„ç†çš„å¹³å‡å‘¨æœŸã€ä¸­ä½æ•°å‘¨æœŸã€‚
*   **ç­–ç•¥è¾…åŠ©**ï¼šé€šè¿‡åˆ†æä¸åŒç­¾è¯å¤„ï¼ˆVisa Officeï¼‰å’Œæ³•å®˜çš„åˆ¤å†³å€¾å‘ï¼Œè¾…åŠ©ç§»æ°‘å¾‹å¸ˆåˆ¶å®šç­–ç•¥ã€‚

---

## 2. æ•°æ®æºè¯´æ˜
*   **è¾“å…¥æ ¼å¼**ï¼šé‡‡é›†è¾“å‡ºçš„JSON æ–‡ä»¶ï¼ˆæ•°ç»„ç»“æ„ï¼‰ã€‚
*   **æ ¸å¿ƒå­—æ®µ**ï¼š
    *   `case_number`: æ¡ˆä»¶ç¼–å·
    *   `filing_date`: ç«‹æ¡ˆæ—¥æœŸ
    *   `title`: æ¡ˆä»¶æ ‡é¢˜
    *   `office`: æ³•é™¢åŠäº‹å¤„ï¼ˆå¦‚ Toronto, Vancouverï¼‰
    *   `docket_entries`: æ¡ˆå·è®°å½•åˆ—è¡¨ï¼ˆåŒ…å« `summary` æ‘˜è¦å’Œ `entry_date` æ—¥æœŸï¼‰

---

## 3. åŠŸèƒ½éœ€æ±‚ (Functional Requirements)

### 3.1 æ•°æ®æ¸…æ´—ä¸é¢„å¤„ç† (Data Preprocessing)
*   **P0 (æœ€é«˜ä¼˜å…ˆçº§)**: è§£æ JSON æ–‡ä»¶ï¼Œå¤„ç†æ—¥æœŸæ ¼å¼ï¼ˆYYYY-MM-DDï¼‰ã€‚
*   **P0**: å¤„ç†ç¼ºå¤±æ•°æ®ï¼ˆå¦‚æ— ç«‹æ¡ˆæ—¥æœŸçš„è®°å½•éœ€å‰”é™¤æˆ–æ ‡è®°ï¼‰ã€‚

### 3.2 æ¡ˆä»¶åˆ†ç±»é€»è¾‘ (Classification Logic)
ç³»ç»Ÿéœ€æ”¯æŒä¸¤ç§åˆ†ç±»æ¨¡å¼ï¼š**å¿«é€Ÿæ¨¡å¼ï¼ˆè§„åˆ™åŒ¹é…ï¼‰** å’Œ **ç²¾å‡†æ¨¡å¼ï¼ˆLLMåˆ†æï¼‰**ã€‚

#### A. æ¡ˆä»¶ç±»å‹ (Case Type)
*   **Mandamus (å¼ºåˆ¶ä»¤)**:
    *   *è§„åˆ™*: Title æˆ– Docket Summary ä¸­åŒ…å« "Mandamus", "compel", "delay"ã€‚
    *   *LLM*: æ ¹æ®æ¡ˆæƒ…æè¿°åˆ¤æ–­æ˜¯å¦ä¸ºå¼ºåˆ¶ä»¤ç”³è¯·ã€‚
*   **Judicial Review (å¸æ³•å®¡æŸ¥/å…¶ä»–)**: ä¸ç¬¦åˆä¸Šè¿°æ¡ä»¶çš„å½’ä¸º Otherã€‚

#### B. æ¡ˆä»¶çŠ¶æ€ (Case Status) & ç»“æŸæ—¥æœŸ
ä¼˜å…ˆçº§é€»è¾‘å¦‚ä¸‹ï¼ˆä¸€æ—¦åŒ¹é…å³ç»ˆæ­¢ï¼‰ï¼š
1.  **Discontinued (æ’¤é”€)**: æ£€æµ‹åˆ° "Notice of Discontinuance"ã€‚
    *   *ä¸šåŠ¡å«ä¹‰*: ç”³è¯·äººä¸»åŠ¨æ’¤è¯‰ï¼ˆé€šå¸¸æ„å‘³ç€ IRCC å·²å¦¥åæˆ–å‘ç­¾ï¼‰ã€‚
2.  **Granted (èƒœè¯‰/æ‰¹å‡†)**: æ£€æµ‹åˆ°åˆ¤å†³ç»“æœä¸º "Granted" æˆ– "Allowed"ã€‚
3.  **Dismissed (é©³å›)**: æ£€æµ‹åˆ° "Dismissed"ï¼ˆå« Leave Dismissed è®¸å¯è¢«æ‹’ï¼‰ã€‚
4.  **Ongoing (è¿›è¡Œä¸­)**: æ— ä¸Šè¿°ç»ˆå±€çŠ¶æ€ã€‚

### 3.3 å®ä½“æå– (Entity Extraction) - **éœ€ä½¿ç”¨ LLM**
*   **P1**: **Visa Office (ç­¾è¯å¤„)**: ä» Docket æ–‡æœ¬ä¸­æå–å…·ä½“çš„ç­¾è¯ä¸­å¿ƒåœ°ç‚¹ï¼ˆå¦‚ Beijing, Ankara, New Delhiï¼‰ï¼Œè€Œéä»…ä»…ä½¿ç”¨æ³•é™¢çš„ Officeã€‚
*   **P2**: **Judge (æ³•å®˜)**: æå–åšå‡ºæœ€ç»ˆè£å†³çš„æ³•å®˜å§“åã€‚

---

## 4. ç»Ÿè®¡åˆ†æéœ€æ±‚ (Statistical Analysis)

### 4.1 å‘¨æœŸç»Ÿè®¡ (Duration Metrics)
éœ€è®¡ç®—ä»¥ä¸‹æ—¶é—´æŒ‡æ ‡ï¼ˆå•ä½ï¼šå¤©ï¼‰ï¼š
*   **ç»“æ¡ˆæ—¶é•¿ (Time to Close)**: `ç»“æ¡ˆæ—¥æœŸ` - `ç«‹æ¡ˆæ—¥æœŸ`ï¼ˆä»…é’ˆå¯¹å·²ç»“æ¡ˆï¼‰ã€‚
*   **å½“å‰æ¡ˆé¾„ (Age of Case)**: `å½“å‰æ—¥æœŸ` - `ç«‹æ¡ˆæ—¥æœŸ`ï¼ˆä»…é’ˆå¯¹è¿›è¡Œä¸­ï¼‰ã€‚
*   **Rule 9 ç­‰å¾…æœŸ**: `ç«‹æ¡ˆæ—¥æœŸ` åˆ° `Rule 9 è®°å½•æ”¶åˆ°æ—¥æœŸ` çš„æ—¶é•¿ï¼ˆè¡¡é‡ç§»æ°‘å±€ç§»äº¤æ¡£æ¡ˆçš„é€Ÿåº¦ï¼‰ã€‚

**ç»Ÿè®¡ç»´åº¦**ï¼š
*   å¹³å‡å€¼ (Mean)
*   ä¸­ä½æ•° (Median)
*   æœ€å¤§å€¼ (Max) / æœ€å°å€¼ (Min)

### 4.2 è¶‹åŠ¿ä¸åˆ†å¸ƒ (Trends & Distribution)
*   **æœˆåº¦è¶‹åŠ¿**: æŒ‰ `YYYY-MM` ç»Ÿè®¡å„ç±»æ¡ˆä»¶çš„æäº¤æ•°é‡ã€‚
*   **åœ°åŸŸåˆ†å¸ƒ**:
    *   æŒ‰æ³•é™¢ (Court Office): Toronto vs Vancouver ç­‰ã€‚
    *   æŒ‰ç­¾è¯å¤„ (Visa Office): ç»Ÿè®¡å“ªäº›æµ·å¤–ç­¾è¯å¤„çš„è¢«è¯‰æ¡ˆä»¶æœ€å¤šã€‚

### 4.3 æˆåŠŸç‡åˆ†æ (Success Metrics)
*   **Mandamus éšæ€§èƒœè¯‰ç‡**: ç»Ÿè®¡ Mandamus æ¡ˆä»¶ä¸­ `Discontinued` çš„æ¯”ä¾‹ï¼ˆè§†ä¸ºè¾¾åˆ°äº†å‚¬åŠç›®çš„ï¼‰ã€‚
*   **è®¸å¯é€šè¿‡ç‡ (Leave Grant Rate)**: ç»Ÿè®¡è¿›å…¥å®è´¨å®¡ç†é˜¶æ®µçš„æ¯”ä¾‹ã€‚

---

## 5. æŠ€æœ¯æ¶æ„ä¸éåŠŸèƒ½éœ€æ±‚

### 5.1 æŠ€æœ¯æ ˆå»ºè®®
*   **ç¼–ç¨‹è¯­è¨€**: Python 3.9+
*   **æ•°æ®å¤„ç†**: Pandas, NumPy
*   **AI æ¨¡å‹**:
    *   å·¥å…·: Ollama (æœ¬åœ°éƒ¨ç½²)
    *   æ¨¡å‹: `qwen2.5-7b-instruct` æˆ– `llama3-8b` (å¹³è¡¡é€Ÿåº¦ä¸å‡†ç¡®æ€§)
    *   äº¤äº’: Python `requests` åº“è°ƒç”¨ Ollama API
*   **è¾“å‡º**: CSV / Excel (.xlsx)

### 5.2 æ€§èƒ½è¦æ±‚
*   **è§„åˆ™æ¨¡å¼**: 5000 æ¡æ¡ˆä»¶è®°å½•å¤„ç†æ—¶é—´ < 10ç§’ã€‚
*   **LLM æ¨¡å¼**: æ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼ˆå¤„ç†å¤§é‡æ•°æ®æ—¶ï¼Œå¦‚æœä¸­æ–­ï¼Œä¸‹æ¬¡èƒ½æ¥ç€è·‘ï¼‰ã€‚

---

## 6. è¾“å‡ºäº¤ä»˜ç‰© (Deliverables)

### æŠ¥è¡¨ 1: æ¡ˆä»¶æ˜ç»†è¡¨ (Case Details)
| Case ID | Title | Filing Date | Court Office | **Visa Office (LLM)** | Type | Status | Outcome Date | Duration (Days) | Judge (Optional) |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| IMM-1 | ... | 2024-12-01 | Toronto | Beijing | Mandamus | Discontinued | 2025-01-15 | 45 | - |

### æŠ¥è¡¨ 2: ç»Ÿè®¡æ¦‚è§ˆ (Summary Report)
1.  **æ€»ä½“æ¦‚å†µ**: æ€»æ¡ˆä»¶æ•°ã€è¿›è¡Œä¸­ã€å·²ç»“æ¡ˆã€‚
2.  **æ—¶é•¿åˆ†æ**: 
    *   Mandamus å¹³å‡ç»“æ¡ˆæ—¶é—´ vs. Other å¹³å‡ç»“æ¡ˆæ—¶é—´ã€‚
    *   å„ç­¾è¯å¤„ (Visa Office) å¹³å‡æ¡ˆé¾„çƒ­åŠ›æ•°æ®ã€‚
3.  **æœˆåº¦æµé‡è¡¨**: æ¯æœˆç«‹æ¡ˆæ•°ã€æ¯æœˆç»“æ¡ˆæ•°ã€‚

---
 
#### 7. å¯è§†åŒ–æŠ¥è¡¨éœ€æ±‚ (Visualization Requirements)

æˆ‘ä»¬ä¸ä»…ä»…éœ€è¦è¡¨æ ¼ï¼Œè¿˜éœ€è¦ç”Ÿæˆä¸€ä¸ª**å›¾è¡¨ä»ªè¡¨ç›˜ (Dashboard)**ï¼Œæ ¸å¿ƒå…³æ³¨ä»¥ä¸‹å››ä¸ªç»´åº¦ï¼š

**7.1 æ¡ˆä»¶é‡è¶‹åŠ¿å›¾ (Volume Trend)**
*   **å›¾è¡¨ç±»å‹**: å †å æŸ±çŠ¶å›¾ (Stacked Bar Chart)
*   **Xè½´**: æœˆä»½ (YYYY-MM)
*   **Yè½´**: æ¡ˆä»¶æ•°é‡
*   **é¢œè‰²åˆ†ç»„**: æ¡ˆä»¶ç±»å‹ (Mandamus / Other) æˆ– çŠ¶æ€ (è¿›è¡Œä¸­ / å·²ç»“æ¡ˆ)
*   **ä¸šåŠ¡ä»·å€¼**: ç›´è§‚å±•ç¤ºæ¡ˆä»¶é‡çš„å¢é•¿è¶‹åŠ¿ï¼Œä»¥åŠæ¯ä¸ªæœˆæ–°æ¡ˆçš„æ„æˆã€‚

**7.2 å¤„ç†å‘¨æœŸç®±çº¿å›¾ (Duration Box Plot) â€”â€” *æ ¸å¿ƒå›¾è¡¨***
*   **å›¾è¡¨ç±»å‹**: ç®±çº¿å›¾ (Box & Whisker Plot)
*   **Xè½´**: æ¡ˆä»¶ç±»å‹ (Mandamus vs. Other) æˆ– ç­¾è¯å¤„ (Visa Office)
*   **Yè½´**: å¤©æ•° (Days)
*   **å±•ç¤ºå†…å®¹**: æ˜¾ç¤ºä¸­ä½æ•°(Median)ã€ä¸Š/ä¸‹å››åˆ†ä½æ•°(25%-75%çš„å¤§å¤šæ•°æ¡ˆä»¶èŒƒå›´)ä»¥åŠå¼‚å¸¸å€¼(Outliers)ã€‚
*   **ä¸šåŠ¡ä»·å€¼**: å®¢æˆ·æœ€å…³å¿ƒâ€œå¤§æ¦‚è¦ç­‰å¤šä¹…â€ã€‚å¹³å‡å€¼å®¹æ˜“è¢«æç«¯é•¿æ¡ˆå­æ‹‰é«˜ï¼Œ**ç®±çº¿å›¾èƒ½å‘Šè¯‰å®¢æˆ·â€œæ­£å¸¸æƒ…å†µä¸‹â€çš„ç­‰å¾…èŒƒå›´**ã€‚

**7.3 ç»“æ¡ˆç»“æœåˆ†å¸ƒå›¾ (Outcome Distribution)**
*   **å›¾è¡¨ç±»å‹**: ç¯å½¢å›¾ (Donut Chart)
*   **åˆ‡ç‰‡**: æ’¤é”€ (Discontinued)ã€èƒœè¯‰ (Granted)ã€é©³å› (Dismissed)ã€è¿›è¡Œä¸­ (Ongoing)ã€‚
*   **ä¸šåŠ¡ä»·å€¼**: å±•ç¤ºæ¡ˆä»¶çš„â€œéšæ€§æˆåŠŸç‡â€ï¼ˆå¦‚ Mandamus çš„é«˜æ’¤è¯‰ç‡é€šå¸¸ä»£è¡¨æˆåŠŸï¼‰ã€‚

**7.4 ç­¾è¯å¤„/æ³•é™¢çƒ­åŠ›å›¾ (Geo/Office Heatmap)**
*   **å›¾è¡¨ç±»å‹**: æ°´å¹³æ¡å½¢å›¾ (Horizontal Bar Chart) æˆ– çƒ­åŠ›å›¾çŸ©é˜µã€‚
*   **ç»´åº¦**: 
    *   Yè½´: ç­¾è¯å¤„åç§° (å¦‚ Beijing, Ankara, Delhi) - *éœ€é€šè¿‡ LLM æå–*
    *   Xè½´: å¹³å‡ç»“æ¡ˆå¤©æ•°
    *   é¢œè‰²æ·±æµ…: æ¡ˆä»¶æ•°é‡
*   **ä¸šåŠ¡ä»·å€¼**: **é«˜ä»·å€¼å›¾è¡¨**ã€‚ä¸€çœ¼è¯†åˆ«å‡ºå“ªä¸ªç­¾è¯å¤„æ˜¯â€œé»‘æ´â€ï¼ˆå¤„ç†æ…¢ä¸”é‡å¤§ï¼‰ï¼Œå“ªä¸ªç­¾è¯å¤„æ•ˆç‡é«˜ã€‚

---

### äºŒã€ æŠ€æœ¯å®ç°æ–¹æ¡ˆ (Python Code)

åœ¨ä¹‹å‰çš„ Python è„šæœ¬åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬å°†å¼•å…¥ `matplotlib` å’Œ `seaborn` (ç”¨äºé™æ€å›¾ç‰‡) æˆ– `plotly` (ç”¨äºäº¤äº’å¼ç½‘é¡µå›¾è¡¨)ã€‚

**æ¨èæ–¹æ¡ˆ**ï¼šä½¿ç”¨ **Seaborn** ç”Ÿæˆé™æ€å›¾ç‰‡æŠ¥å‘Šï¼ˆé€‚åˆæ’å…¥ Word/PDFï¼‰ï¼Œç®€å•ã€ç¾è§‚ä¸”æ— éœ€å‰ç«¯çŸ¥è¯†ã€‚
 
### ä¸‰ã€ ä¸ºä»€ä¹ˆé€‰æ‹©è¿™å‡ ç§å›¾è¡¨ï¼Ÿï¼ˆç»™å¼€å‘äººå‘˜çš„è§£é‡Šï¼‰

1.  **ç®±çº¿å›¾ (Box Plot)** æ˜¯æ³•å¾‹æ•°æ®åˆ†æçš„ç¥å™¨ã€‚
    *   å®¢æˆ·é—®ï¼šâ€œå¼ºåˆ¶ä»¤è¦å¤šä¹…ï¼Ÿâ€
    *   å¹³å‡å€¼è¯´ï¼šâ€œ90å¤©ã€‚â€ï¼ˆä½†è¿™å¯èƒ½è¢«ä¸€ä¸ªæ‹–äº†3å¹´çš„æ¡ˆå­æ‹‰é«˜äº†ï¼‰
    *   ç®±çº¿å›¾è¯´ï¼šâ€œ**50% çš„æ¡ˆå­åœ¨ 45å¤© åˆ° 75å¤© ä¹‹é—´**ï¼ˆç®±ä½“ï¼‰ï¼Œä¸­ä½æ•°æ˜¯ 60å¤©ã€‚â€ â€”â€” **è¿™å¯¹é¢„æœŸç®¡ç†éå¸¸é‡è¦**ã€‚

2.  **åŒè½´å›¾ (Bar + Line)** ç”¨äºåœ°åŒºåˆ†æã€‚
    *   å¯ä»¥åŒæ—¶å±•ç¤º **â€œå“ªé‡Œæ¡ˆå­å¤šâ€** (æŸ±çŠ¶) å’Œ **â€œå“ªé‡Œå¤„ç†æ…¢â€** (æŠ˜çº¿)ã€‚å¦‚æœæŸä¸ªåŠäº‹å¤„æŸ±å­å¾ˆé«˜ï¼ˆæ¡ˆå­å¤šï¼‰ä½†çº¢çº¿å¾ˆä½ï¼ˆé€Ÿåº¦å¿«ï¼‰ï¼Œè¯´æ˜æ•ˆç‡é«˜ã€‚

3.  **å †å æŸ±çŠ¶å›¾ (Stacked Bar)** ç”¨äºè¶‹åŠ¿ã€‚
    *   å¯ä»¥çœ‹åˆ°æŸä¸ªæœˆä»½æ˜¯ä¸æ˜¯çªç„¶çˆ†å‘äº†å¾ˆå¤š Mandamus ç”³è¯·ï¼ˆå¯èƒ½æ˜¯å› ä¸ºæŸä¸ªç­¾è¯æ”¿ç­–å˜åŠ¨ï¼‰ã€‚

### å››ã€ æ€»ç»“å»ºè®®

åœ¨ä½ çš„ **PRD** ä¸­ï¼ŒåŠ å…¥ä¸Šè¿°â€œå¯è§†åŒ–éœ€æ±‚â€ç« èŠ‚ã€‚åœ¨å¼€å‘é˜¶æ®µï¼Œå…ˆè®© LLM æŠŠ `Visa Office`ï¼ˆç­¾è¯å¤„ï¼‰æå–å‡ºæ¥ï¼Œå› ä¸ºâ€œæ³•é™¢åŠäº‹å¤„ï¼ˆTorontoï¼‰â€çš„æ•°æ®é€šå¸¸æ²¡æœ‰â€œç­¾è¯å¤„ï¼ˆBeijing/Ankaraï¼‰â€çš„æ•°æ®å¯¹ç”³è¯·äººæ›´æœ‰å‚è€ƒä»·å€¼ã€‚åŸºäº Visa Office åšä¸Šé¢çš„å›¾è¡¨åˆ†æï¼Œä»·å€¼ä¼šç¿»å€ã€‚

## 8. å¼€å‘è·¯çº¿å›¾ (Roadmap)

*   **é˜¶æ®µä¸€ (MVP)**: å®ŒæˆåŸºäºè§„åˆ™ï¼ˆå…³é”®å­—ï¼‰çš„åˆ†ç±»ï¼Œè¾“å‡ºåŸºç¡€çš„ CSV ç»Ÿè®¡ï¼ˆæ•°é‡ã€çŠ¶æ€ã€æ³•é™¢åœ°åŒºï¼‰ã€‚
*   **é˜¶æ®µäºŒ (AI Integration)**: æ¥å…¥ Ollamaï¼Œå®ç°"ç­¾è¯å¤„æå–"å’Œæ›´ç²¾å‡†çš„"çŠ¶æ€åˆ¤æ–­"ï¼Œä¿®æ­£è§„åˆ™åˆ¤æ–­çš„è¯¯åˆ¤ã€‚
*   **é˜¶æ®µä¸‰ (Advanced Analytics)**: å¢åŠ  Rule 9 å»¶è¿Ÿåˆ†æã€æ³•å®˜å€¾å‘æ€§åˆ†æã€å¯è§†åŒ–å›¾è¡¨ç”Ÿæˆã€‚

---
# LLM vs NLP

ç°çŠ¶ï¼š**æœ‰ç»“æ„åŒ–æ•°æ®ï¼Œä½†å…³é”®æ ‡ç­¾ï¼ˆå¼ºåˆ¶ä»¤ / é©³å› / èƒœè¯‰ / hearing / æ’¤æ¡ˆç­‰ï¼‰åŸ‹åœ¨ summary çš„è‡ªç„¶è¯­è¨€æ–‡æœ¬é‡Œã€‚**

è¿™ç§æƒ…å†µçš„æœ€ä½³åšæ³•éå¸¸æ˜ç¡®ï¼š

# âœ… **ä¼˜å…ˆä¸ç”¨å¤§è¯­è¨€æ¨¡å‹ â€”â€” å…ˆç”¨å¯ç»´æŠ¤çš„å…³é”®è¯/è§„åˆ™ NLP æ–¹æ¡ˆ**

å› ä¸ºï¼š

* æ³•é™¢ summary çš„æ ¼å¼ç›¸å¯¹å›ºå®šï¼ˆå¸æ³•ç³»ç»Ÿæ–‡æœ¬ä¸€è‡´æ€§å¾ˆé«˜ï¼‰
* æ³•å¾‹ç»“æœçš„è¡¨è¾¾æ–¹å¼æœ‰é™ï¼ˆdismissed / allowed / discontinuance / mandamus / JR ç­‰ï¼‰
* ä½ éœ€è¦çš„æ˜¯ 100% å¯é‡å¤ã€å¯è§£é‡Šçš„åˆ†ç±»ç»“æœï¼ˆLLM ä¸ç¨³å®šï¼Œæˆæœ¬é«˜ï¼‰
* ä½ çš„æ•°æ®é‡å¯èƒ½å¾ˆå¤§ï¼ŒLLM æˆæœ¬ä¼šæ˜æ˜¾å¢åŠ 

**æ€»ç»“ï¼šä½ çš„åœºæ™¯æ›´é€‚åˆä¼ ç»Ÿ NLPï¼ˆè§„åˆ™ + å…³é”®è¯ + æ­£åˆ™ + æ¨¡å¼åŒ¹é…ï¼‰ï¼Œè€Œä¸æ˜¯å¤§æ¨¡å‹ã€‚**

---

# ğŸ‘ **æ¨èçš„æœ€ä½³æŠ€æœ¯è§£å†³æ–¹æ¡ˆ**

## **1. ç”¨å…³é”®è¯/æ­£åˆ™æŠ½å–æ ‡ç­¾**

æ¯”å¦‚ summary ä¸­å¸¸å‡ºç°ï¼š

### **Outcome**

* `dismissed` â†’ é©³å›
* `allowed` â†’ èƒœè¯‰
* `partially allowed` â†’ éƒ¨åˆ†èƒœè¯‰
* `settled` / `resolved` â†’ å’Œè§£
* `discontinued` / `withdrawn` â†’ æ’¤æ¡ˆ

### **Case Type**

* `mandamus` â†’ å¼ºåˆ¶ä»¤
* `judicial review` / `JR` â†’ å¸æ³•å¤æ ¸
* `leave granted` â†’ leave é˜¶æ®µå†³å®š
* `appeal` â†’ ä¸Šè¯‰

### **Procedural events**

* `hearing scheduled` â†’ æœ‰ hearing
* `no hearing` / `on the record` â†’ æ— å¬è¯
* `motion` â†’ åŠ¨è®®
* `extension` â†’ å»¶æœŸ

â¡ è¿™äº›éƒ½èƒ½ç›´æ¥é€šè¿‡è¯å…¸æ˜ å°„æ ‡ç­¾ã€‚

---

# ğŸ§  **2. ç”¨ text patternsï¼ˆçŸ­è¯­æ¨¡å¼ï¼‰æé«˜å‡†ç¡®ç‡**

ä¾‹å¦‚ï¼š

```
r"The application is dismissed( with costs)?"
r"The application for judicial review is allowed"
r"Leave is granted"
r"The matter is remitted"
r"The parties reached a settlement"
r"The application is discontinued"
```

è¿™äº›æ¨¡å¼åœ¨è”é‚¦æ³•é™¢ summary ä¸­æå…¶å¸¸è§ï¼Œèƒ½è¦†ç›– 80%+ çš„æƒ…å†µã€‚

---

# ğŸ“ˆ **3. å¯¹äºæå°‘æ•°æ¨¡ç³Š summaryï¼Œæ‰ä½¿ç”¨ LLMï¼ˆå¯é€‰çš„æ··åˆæ–¹æ¡ˆï¼‰**

ä¾‹å¦‚ summary åƒè¿™æ ·ï¼š

> â€œThe Court finds that the delay is unreasonable; however, given subsequent actions of IRCC, the application is now moot.â€

è¿™é‡Œå¾ˆéš¾é€šè¿‡å…³é”®è¯åˆ¤æ–­åˆ°åº•æ˜¯ï¼š

* é©³å›ï¼ˆmoot dismissï¼‰ï¼Ÿ
* å·²è§£å†³å¯¼è‡´ mootï¼Ÿ
* éƒ¨åˆ†å…è®¸ï¼Ÿ

**è¿™ç§é•¿å¥è¯­ä¹‰å¤æ‚çš„æƒ…å†µï¼ŒLLM æ‰èƒ½è¡¥å……ã€‚**

æˆ‘æ¨èï¼š

**ä¸»ç³»ç»Ÿä½¿ç”¨è§„åˆ™ NLP
â†’ ä¸ç¡®å®šæˆ–æ— æ³•åˆ¤æ–­çš„å°‘æ•° summary â†’ é€ç»™ LLM åšäºŒæ¬¡è§£æã€‚**

LLM è°ƒç”¨æ¬¡æ•°ä¼šéå¸¸ä½ï¼Œæˆæœ¬å¤§å¹…é™ä½ã€‚

---
ä¸‹é¢æˆ‘ä¼šç»™ä½ ä¸€å¥—**å®Œæ•´ã€å¯ç›´æ¥è¿è¡Œçš„ Python ä»£ç **ï¼Œç”¨äºï¼š

* è‡ªåŠ¨è¯†åˆ«æ˜¯å¦æ˜¯ Mandamus å¼ºåˆ¶ä»¤æ¡ˆä»¶
* è‡ªåŠ¨è¯†åˆ«æ¡ˆä»¶ç»“æœï¼ˆDismissed / Allowed / Discontinued ç­‰ï¼‰
* æœˆåº¦ç»Ÿè®¡æ¡ˆä»¶æ•°é‡ã€Mandamus å æ¯”
* æœˆåº¦è¶‹åŠ¿å›¾éœ€è¦æ—¶å¯è¾“å‡º DataFrameï¼ˆä½ å¯ç›´æ¥åœ¨ notebook æˆ–æœ¬åœ°ç”»å›¾ï¼‰

ä»£ç ä»¥ä½ ä¸Šä¼ çš„ JSON æ–‡ä»¶æ ¼å¼ä¸ºåŸºç¡€ï¼ˆæ¯ä¸ªæ–‡ä»¶ä¸€ä¸ªæ¡ˆä»¶ï¼ŒåŒ…å« docket_entries åˆ—è¡¨å’Œ summary æ–‡æœ¬ï¼‰ã€‚

---

# âœ… **ä¸€ã€æ ¸å¿ƒæ€è·¯ï¼ˆè§„åˆ™ NLPï¼Œä¸ç”¨å¤§æ¨¡å‹ï¼‰**

æˆ‘ä»¬ä» docket_entries ä¸­å¯»æ‰¾ï¼š

### â‘  **Mandamus æ ‡è®°ï¼ˆå¼ºåˆ¶ä»¤ï¼‰**

åœ¨ summary ä¸­æŸ¥æ‰¾å…³é”®å­—ï¼š

```
"Mandamus", "writ of mandamus"
```

### â‘¡ **æ¡ˆä»¶ç»“æœåˆ¤å®š**

æ ¹æ® docket_entries é‡Œæœ€åå‡ æ¡ summary åˆ¤æ–­ï¼š

* **Dismissed**:
  `"dismissed"`, `"application is dismissed"`
* **Allowed**:
  `"allowed"`, `"granted"`
* **Discontinued / Withdrawn**:
  `"discontinued"`, `"notice of discontinuance"`, `"withdrawn"`
* **Still Active / Pending**:
  æ— ç»“æœå…³é”®å­— â†’ é»˜è®¤ Pending

### â‘¢ **æŒ‰ entry_date åˆ†ç»„ç»Ÿè®¡ï¼ˆæœˆåº¦è¶‹åŠ¿ï¼‰**

---

# âœ… äºŒã€å®Œæ•´ Python ä»£ç 

ä½ æŠŠæ‰€æœ‰æ¡ˆä»¶ JSON æ–‡ä»¶æ”¾åœ¨ä¸€ä¸ªç›®å½•ï¼Œä¾‹å¦‚ï¼š`data/`

```python
import os
import json
import pandas as pd
import re
from datetime import datetime

# -------------------------
# è§„åˆ™ NLPï¼šå…³é”®è¯åŒ¹é…
# -------------------------

MANDAMUS_KEYWORDS = [
    r"mandamus",
    r"writ of mandamus"
]

OUTCOME_PATTERNS = {
    "dismissed": [
        r"dismissed",
        r"application.*dismissed"
    ],
    "allowed": [
        r"allowed",
        r"granted",
        r"application.*allowed"
    ],
    "discontinued": [
        r"discontinued",
        r"notice of discontinuance",
        r"withdrawn"
    ],
}

def text_match(text, patterns):
    """åˆ¤æ–­æ–‡æœ¬æ˜¯å¦åŒ¹é…ä»»æ„å…³é”®è¯"""
    text = text.lower()
    for p in patterns:
        if re.search(p, text):
            return True
    return False


# -------------------------
# æå–æ¡ˆä»¶æ ‡ç­¾
# -------------------------

def extract_case_features(case_json):
    case_id = case_json["case_id"]
    filing_date = case_json.get("filing_date", None)

    docket = case_json.get("docket_entries", [])

    all_summary = " ".join([d["summary"] for d in docket if "summary" in d]).lower()

    # ---- Mandamus åˆ¤æ–­ ----
    is_mandamus = text_match(all_summary, MANDAMUS_KEYWORDS)

    # ---- Outcome åˆ¤å®šï¼ˆä»æœ€ååˆ°æœ€å‰æœç´¢ï¼‰ ----
    outcome = "pending"
    for d in reversed(docket):
        summary = d.get("summary", "").lower()
        if text_match(summary, OUTCOME_PATTERNS["discontinued"]):
            outcome = "discontinued"
            break
        if text_match(summary, OUTCOME_PATTERNS["dismissed"]):
            outcome = "dismissed"
            break
        if text_match(summary, OUTCOME_PATTERNS["allowed"]):
            outcome = "allowed"
            break

    # ---- æœˆä»½ ----
    if filing_date:
        month = filing_date[:7]  # yyyy-mm
    else:
        month = None

    return {
        "case_id": case_id,
        "filing_date": filing_date,
        "month": month,
        "is_mandamus": is_mandamus,
        "outcome": outcome
    }


# -------------------------
# è¯»å–ç›®å½•æ‰€æœ‰ JSON æ–‡ä»¶
# -------------------------

def load_all_cases(path="data"):
    rows = []
    for fn in os.listdir(path):
        if fn.endswith(".json"):
            with open(os.path.join(path, fn), "r") as f:
                case_json = json.load(f)
                row = extract_case_features(case_json)
                rows.append(row)

    df = pd.DataFrame(rows)
    return df


# -------------------------
# ç»Ÿè®¡å‡½æ•°
# -------------------------

def generate_statistics(df):
    # æœˆåº¦æ€»æ¡ˆä»¶æ•°
    monthly_total = df.groupby("month")["case_id"].count().rename("total_cases")

    # Mandamus æœˆåº¦æ•°é‡
    monthly_mandamus = df[df["is_mandamus"]].groupby("month")["case_id"].count().rename("mandamus_cases")

    # ç»“æœç»Ÿè®¡
    monthly_outcome = df.pivot_table(index="month", columns="outcome", values="case_id", aggfunc="count").fillna(0)

    # åˆå¹¶æ€»è¡¨
    summary = pd.concat([monthly_total, monthly_mandamus, monthly_outcome], axis=1).fillna(0)

    # å¢åŠ  mandamus å æ¯”
    summary["mandamus_ratio"] = summary["mandamus_cases"] / summary["total_cases"]

    return summary


# -------------------------
# ä¸»ç¨‹åºæ‰§è¡Œ
# -------------------------

if __name__ == "__main__":
    df = load_all_cases("data")

    print("\n=== åŸå§‹æ ‡ç­¾æ•°æ® ===")
    print(df)

    summary = generate_statistics(df)

    print("\n=== æœˆåº¦è¶‹åŠ¿ç»Ÿè®¡ ===")
    print(summary)
```

---

# âœ… ä¸‰ã€ç¨‹åºè¾“å‡ºå†…å®¹åŒ…æ‹¬ï¼š

## **1. æ¯ä¸ªæ¡ˆä»¶çš„è‡ªåŠ¨æ ‡ç­¾**

ä¾‹å¦‚ï¼š

| case_id   | month   | mandamus | outcome      |
| --------- | ------- | -------- | ------------ |
| IMM-96-25 | 2025-01 | True     | pending      |
| IMM-2-25  | 2025-01 | True     | pending      |
| IMM-6-25  | 2024-12 | False    | discontinued |

ï¼ˆå‰ä¸‰æ¡æ¥æºäºä½ æä¾›çš„ JSON æ–‡ä»¶ï¼‰

---

## **2. æœˆåº¦è¶‹åŠ¿ç»Ÿè®¡**

ä¾‹å¦‚è¾“å‡ºç±»ä¼¼ï¼š

| month   | total | mandamus | dismissed | allowed | discontinued | mandamus_ratio |
| ------- | ----- | -------- | --------- | ------- | ------------ | -------------- |
| 2024-12 | 1     | 0        | 0         | 0       | 1            | 0              |
| 2025-01 | 2     | 2        | 0         | 0       | 0            | 1.0            |

---

# ğŸš€ æƒ³è¦å›¾è¡¨ï¼Ÿ

å¦‚æœä½ éœ€è¦ï¼Œæˆ‘å¯ä»¥ç»§ç»­æä¾›ï¼š

* æœˆåº¦æŠ˜çº¿å›¾ï¼ˆMandamus è¶‹åŠ¿ï¼‰
* ç»“æœåˆ†å¸ƒæŸ±çŠ¶å›¾
* å„ç±»è¶‹åŠ¿å›¾çš„ Python matplotlib/plotly ä»£ç 

---

