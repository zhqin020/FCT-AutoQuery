#!/usr/bin/env bash
set -euo pipefail

# Example pre-commit hook: enforce project Constitution preflight
# This file is tracked in the repo as `hooks/pre-commit`.
# To install locally (one-time):
#   cp hooks/pre-commit .git/hooks/pre-commit && chmod +x .git/hooks/pre-commit

ROOT_DIR="$(git rev-parse --show-toplevel 2>/dev/null || echo '.')"
cd "$ROOT_DIR"

if [[ ! -x "scripts/check_constitution.sh" ]]; then
  echo "Warning: scripts/check_constitution.sh is not executable; running it anyway." >&2
  bash scripts/check_constitution.sh
else
  ./scripts/check_constitution.sh
fi
